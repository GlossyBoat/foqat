<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="foqat">
<title>Basic Functions • foqat</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic Functions">
<meta property="og:description" content="foqat">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">foqat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.7</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Air_Quality.html">Air Quality</a>
    <a class="dropdown-item" href="../articles/Atmospheric_Radiation.html">Atmospheric Radiation</a>
    <a class="dropdown-item" href="../articles/Basic_Functions.html">Basic Functions</a>
    <a class="dropdown-item" href="../articles/Particle_Size_Distribution.html">Particle Size Distribution</a>
    <a class="dropdown-item" href="../articles/Plot_Functions.html">Plot Functions</a>
    <a class="dropdown-item" href="../articles/Trace_Gas_Chemistry.html">Trace Gas Chemistry</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tianshu129/foqat/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="Basic_Functions_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Basic Functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tianshu129/foqat/blob/HEAD/vignettes/Basic_Functions.Rmd" class="external-link"><code>vignettes/Basic_Functions.Rmd</code></a></small>
      <div class="d-none name"><code>Basic_Functions.Rmd</code></div>
    </div>

    
    
<p>To begin, we’ll load <code>foqat</code> and show three datasets in <code>foqat</code>:<br><code>aqi</code> is a dataset about time series of air quality with 1-second resolution.<br><code>voc</code> is a dataset about time series of volatile organic compounds with 1-hour resolution.<br><code>met</code> is a dataset about time series of meterological conditions with 1-hour resolution.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tianshu129/foqat" class="external-link">foqat</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">aqi</span><span class="op">)</span>
<span class="co">#&gt;                  Time        NO     NO2       CO SO2      O3</span>
<span class="co">#&gt; 1 2017-05-01 01:00:00 0.0376578 2.79326 0.256900  NA 56.5088</span>
<span class="co">#&gt; 2 2017-05-01 01:01:00 0.0341483 2.76094 0.254692  NA 57.0546</span>
<span class="co">#&gt; 3 2017-05-01 01:02:00 0.0310285 2.65239 0.265178  NA 57.6654</span>
<span class="co">#&gt; 4 2017-05-01 01:03:00 0.0357016 2.60257 0.269691  NA 58.7863</span>
<span class="co">#&gt; 5 2017-05-01 01:04:00 0.0337507 2.59527 0.273395  NA 59.0342</span>
<span class="co">#&gt; 6 2017-05-01 01:05:00 0.0238120 2.57260 0.276464  NA 59.2240</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">voc</span><span class="op">)</span>
<span class="co">#&gt;                  Time Propylene Acetylene n.Butane trans.2.Butene Cyclohexane</span>
<span class="co">#&gt; 1 2020-05-01 00:00:00     0.233    0.1750    0.544          0.020      0.1020</span>
<span class="co">#&gt; 2 2020-05-01 01:00:00     0.376    0.2025    0.704          0.028      0.1045</span>
<span class="co">#&gt; 3 2020-05-01 02:00:00     0.519    0.2300    0.864          0.036      0.1070</span>
<span class="co">#&gt; 4 2020-05-01 03:00:00     0.805    0.2850    1.184          0.052      0.1120</span>
<span class="co">#&gt; 5 2020-05-01 04:00:00     0.658    0.2920    1.304          0.075      0.1230</span>
<span class="co">#&gt; 6 2020-05-01 05:00:00     0.538    0.3700    0.904          0.049      0.1110</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">met</span><span class="op">)</span>
<span class="co">#&gt;                  Time  TEM  HUM  WS WD</span>
<span class="co">#&gt; 1 2017-05-01 00:00:00 21.4 87.0 3.0 39</span>
<span class="co">#&gt; 2 2017-05-01 00:05:00 21.2 86.7 3.6 68</span>
<span class="co">#&gt; 3 2017-05-01 00:10:00 21.0 86.3 3.5 76</span>
<span class="co">#&gt; 4 2017-05-01 00:15:00 20.9 85.8 3.4 73</span>
<span class="co">#&gt; 5 2017-05-01 00:20:00 20.8 86.0 2.8 68</span>
<span class="co">#&gt; 6 2017-05-01 00:25:00 20.8 86.0 2.3 68</span></code></pre></div>
<div class="section level2">
<h2 id="summary-time-series">Summary time series<a class="anchor" aria-label="anchor" href="#summary-time-series"></a>
</h2>
<p>The <code><a href="../reference/statdf.html">statdf()</a></code> allows you to statistics time series:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/statdf.html">statdf</a></span><span class="op">(</span><span class="va">aqi</span><span class="op">)</span>
<span class="co">#&gt;      mean    sd   min   25%   50%   75%    max integrity</span>
<span class="co">#&gt; NO   0.33  0.61 -0.08  0.08  0.13  0.37  19.02     0.765</span>
<span class="co">#&gt; NO2  3.06  2.68 -0.15  1.07  2.21  4.13  20.53     0.786</span>
<span class="co">#&gt; CO   0.30  0.09  0.17  0.25  0.27  0.34   0.73     0.709</span>
<span class="co">#&gt; SO2  1.80  2.76 -0.15  0.25  0.97  2.11  34.08     0.734</span>
<span class="co">#&gt; O3  52.86 19.53  7.95 38.89 49.50 64.38 106.61     0.783</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="resample-time-series">Resample time series<a class="anchor" aria-label="anchor" href="#resample-time-series"></a>
</h2>
<p>We can resample time series by using <code><a href="../reference/trs.html">trs()</a></code>, which will give you a new time series with new resolution and complete timestamps.<br>
You can use <code>bkip</code> to set a new time resolution.<br>
The time series can be clipped by using <code>st</code> (start time) and <code>et</code> (end time).<br>
The default function of resampling is <code>mean</code>. The wind data is acceptable by setting <code>wind</code> to <code>TRUE</code> and specifying <code>coliws</code> (the column index of the wind speed) and <code>coliwd</code> (the column index of the wind speed).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_met</span><span class="op">=</span><span class="fu"><a href="../reference/trs.html">trs</a></span><span class="op">(</span><span class="va">met</span>, bkip <span class="op">=</span> <span class="st">"1 hour"</span>, st <span class="op">=</span> <span class="st">"2017-05-01 01:00:00"</span>, wind <span class="op">=</span> <span class="cn">TRUE</span>, coliws <span class="op">=</span> <span class="fl">4</span>, coliwd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; Joining, by = "temp_datetime"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">new_met</span><span class="op">)</span>
<span class="co">#&gt;                  Time      TEM      HUM       WS       WD</span>
<span class="co">#&gt; 1 2017-05-01 01:00:00 21.18333 83.15833 4.555427 72.52891</span>
<span class="co">#&gt; 2 2017-05-01 02:00:00 21.54167 77.62500 4.238292 72.02753</span>
<span class="co">#&gt; 3 2017-05-01 03:00:00 20.71667 80.22500 5.287611 82.34847</span>
<span class="co">#&gt; 4 2017-05-01 04:00:00 20.52500 79.80000 5.653918 89.15400</span>
<span class="co">#&gt; 5 2017-05-01 05:00:00 21.12500 61.41667 7.417430 98.62400</span>
<span class="co">#&gt; 6 2017-05-01 06:00:00 21.30000 51.44167 8.401939 89.26818</span></code></pre></div>
<p>You can also change the default function of resampling to <code>sum</code>, <code>median</code>, <code>min</code>, <code>max</code>, <code>sd</code>, <code>quantile</code>. If you choose <code>quantile</code>, you will also need to fill <code>probs</code> (e.g., 0.5).</p>
</div>
<div class="section level2">
<h2 id="calculate-the-variation-of-time-series">Calculate the variation of time series<a class="anchor" aria-label="anchor" href="#calculate-the-variation-of-time-series"></a>
</h2>
<p><code><a href="../reference/svri.html">svri()</a></code> helps you compute the variation of time series (e.g. calculate the max value of all values grouped by hours of day).</p>
<p>The parameters of <code>bkip</code>, <code>st</code>, <code>et</code>, <code>fun</code> is same as <code>trs</code>. The wind data is acceptable just like <code><a href="../reference/trs.html">trs()</a></code>.</p>
<p><code>mode</code> allows you to choose modes of calculation, <code>value</code> is the sub parameter of <code>mode</code>.There have three modes: <code>recipes</code>, <code>ncycle</code>, <code>custom</code> which will be introduced below:</p>
<div class="section level3">
<h3 id="mode-recipes">
<code>mode = recipes</code><a class="anchor" aria-label="anchor" href="#mode-recipes"></a>
</h3>
<p><code>recipes</code> stands for built-in solutions.<br>
The mode <code>recipes</code> corresponds to three <code>values</code>: <code>day</code>, <code>week</code>, <code>month</code>. <code>day</code> means the time series will group by hours from 0 to 23.<br><code>week</code> means the time series will group by hours from 1 to 7.<br><code>month</code> means the time series will group by hours from 1 to 31. Below is an example which calculate the median values for time series group by hour (e.g., 0:00, 1:00 …).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_voc</span><span class="op">=</span><span class="fu"><a href="../reference/svri.html">svri</a></span><span class="op">(</span><span class="va">voc</span>, bkip<span class="op">=</span><span class="st">"1 hour"</span>, mode<span class="op">=</span><span class="st">"recipes"</span>, value<span class="op">=</span><span class="st">"day"</span>, fun<span class="op">=</span><span class="st">"median"</span><span class="op">)</span>
<span class="co">#&gt; Joining, by = "temp_datetime"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">new_voc</span><span class="op">)</span>
<span class="co">#&gt;   hour of day Propylene Acetylene n.Butane trans.2.Butene Cyclohexane</span>
<span class="co">#&gt; 1           0     0.461    0.3555    0.583          0.051      0.1020</span>
<span class="co">#&gt; 2           1     0.581    0.3710    0.704          0.048      0.1045</span>
<span class="co">#&gt; 3           2     0.583    0.4020    0.864          0.041      0.1120</span>
<span class="co">#&gt; 4           3     0.805    0.4530    1.184          0.052      0.1220</span>
<span class="co">#&gt; 5           4     0.658    0.4180    1.304          0.075      0.1230</span>
<span class="co">#&gt; 6           5     0.572    0.5620    0.923          0.049      0.1210</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mode-ncycle">
<code>mode = ncycle</code><a class="anchor" aria-label="anchor" href="#mode-ncycle"></a>
</h3>
<p><code>ncycle</code> stands for grouping time series by the order number of each row in each cycle.<br>
Below is an example which calculate the median values for time series group by hour (e.g., 0:00, 1:00 …).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_voc</span><span class="op">=</span><span class="fu"><a href="../reference/svri.html">svri</a></span><span class="op">(</span><span class="va">voc</span>, bkip<span class="op">=</span><span class="st">"1 hour"</span>, st<span class="op">=</span><span class="st">"2020-05-01 00:00:00"</span>, mode<span class="op">=</span><span class="st">"ncycle"</span>, value<span class="op">=</span><span class="fl">24</span>, fun<span class="op">=</span><span class="st">"median"</span><span class="op">)</span>
<span class="co">#&gt; Joining, by = "temp_datetime"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">new_voc</span><span class="op">)</span>
<span class="co">#&gt;   cycle Propylene Acetylene n.Butane trans.2.Butene Cyclohexane</span>
<span class="co">#&gt; 1     0     0.461    0.3555    0.583          0.051      0.1020</span>
<span class="co">#&gt; 2     1     0.581    0.3710    0.704          0.048      0.1045</span>
<span class="co">#&gt; 3     2     0.583    0.4020    0.864          0.041      0.1120</span>
<span class="co">#&gt; 4     3     0.805    0.4530    1.184          0.052      0.1220</span>
<span class="co">#&gt; 5     4     0.658    0.4180    1.304          0.075      0.1230</span>
<span class="co">#&gt; 6     5     0.572    0.5620    0.923          0.049      0.1210</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mode-custom">
<code>mode = custom</code><a class="anchor" aria-label="anchor" href="#mode-custom"></a>
</h3>
<p><code>custom</code> stands for grouping time series by a reference column in time serires. If you select <code>mode = custom</code>, <code>value</code> stands for the column index of the reference column. Below is an example which calculate the median values for time series group by hour (e.g., 0:00, 1:00 …).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#add a new column stands for hour.</span>
<span class="va">voc</span><span class="op">$</span><span class="va">hour</span><span class="op">=</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/hour.html" class="external-link">hour</a></span><span class="op">(</span><span class="va">voc</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span>
<span class="co">#calculate according to the index of reference column.</span>
<span class="va">new_voc</span><span class="op">=</span><span class="fu"><a href="../reference/svri.html">svri</a></span><span class="op">(</span><span class="va">voc</span>, bkip <span class="op">=</span> <span class="st">"1 hour"</span>, mode<span class="op">=</span><span class="st">"custom"</span>, value<span class="op">=</span><span class="fl">7</span>, fun<span class="op">=</span><span class="st">"median"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">new_voc</span><span class="op">[</span>,<span class="op">-</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;   custom cycle Propylene Acetylene n.Butane trans.2.Butene Cyclohexane</span>
<span class="co">#&gt; 1            0     0.461    0.3555    0.583          0.051      0.1020</span>
<span class="co">#&gt; 2            1     0.581    0.3710    0.704          0.048      0.1045</span>
<span class="co">#&gt; 3            2     0.583    0.4020    0.864          0.041      0.1120</span>
<span class="co">#&gt; 4            3     0.805    0.4530    1.184          0.052      0.1220</span>
<span class="co">#&gt; 5            4     0.658    0.4180    1.304          0.075      0.1230</span>
<span class="co">#&gt; 6            5     0.572    0.5620    0.923          0.049      0.1210</span>
<span class="co">#rmove voc </span>
<span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">voc</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="calculate-average-of-variation">Calculate average of variation<a class="anchor" aria-label="anchor" href="#calculate-average-of-variation"></a>
</h2>
<p><code><a href="../reference/avri.html">avri()</a></code> is a customized version of <code><a href="../reference/svri.html">svri()</a></code> which helps you to calculate the average variation (with standard deviation) of time series.</p>
<p>The output is a data frame which contains both the average variations and the standard deviations. An example is a time series of 3 species. The second to the fourth column are the average variations, and the fifth to the seventh column are the standard deviations.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_voc</span><span class="op">=</span><span class="fu"><a href="../reference/avri.html">avri</a></span><span class="op">(</span><span class="va">voc</span>, bkip <span class="op">=</span> <span class="st">"1 hour"</span>, st <span class="op">=</span> <span class="st">"2020-05-01 01:00:00"</span><span class="op">)</span>
<span class="co">#&gt; Joining, by = "temp_datetime"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">new_voc</span><span class="op">)</span>
<span class="co">#&gt;   hour of day Propylene_ave Acetylene_ave n.Butane_ave trans.2.Butene_ave</span>
<span class="co">#&gt; 1           0      0.735375       0.48525       1.1655             0.0695</span>
<span class="co">#&gt; 2           1      0.737650       0.39920       1.0683             0.0575</span>
<span class="co">#&gt; 3           2      0.831800       0.37320       1.1748             0.0534</span>
<span class="co">#&gt; 4           3      1.420300       0.38060       2.2370             0.0910</span>
<span class="co">#&gt; 5           4      1.051800       0.42100       1.8614             0.0664</span>
<span class="co">#&gt; 6           5      1.133200       0.59140       1.8872             0.0604</span>
<span class="co">#&gt;   Cyclohexane_ave Propylene_sd Acetylene_sd n.Butane_sd trans.2.Butene_sd</span>
<span class="co">#&gt; 1          0.0910    0.5876756    0.2137766   1.1091851        0.04648835</span>
<span class="co">#&gt; 2          0.1034    0.5677007    0.2099156   0.9505957        0.03992493</span>
<span class="co">#&gt; 3          0.1098    0.6452141    0.1634861   0.8482224        0.02864961</span>
<span class="co">#&gt; 4          0.1210    1.5527906    0.1721926   2.1616755        0.06951619</span>
<span class="co">#&gt; 5          0.1392    0.8127953    0.2090957   1.4807749        0.03008820</span>
<span class="co">#&gt; 6          0.1652    0.8916562    0.2569549   1.6192165        0.02475480</span>
<span class="co">#&gt;   Cyclohexane_sd</span>
<span class="co">#&gt; 1     0.02184414</span>
<span class="co">#&gt; 2     0.02442181</span>
<span class="co">#&gt; 3     0.02115892</span>
<span class="co">#&gt; 4     0.02736786</span>
<span class="co">#&gt; 5     0.06293012</span>
<span class="co">#&gt; 6     0.10819057</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="convert-time-series-into-proportion-time-series">Convert time series into proportion time series<a class="anchor" aria-label="anchor" href="#convert-time-series-into-proportion-time-series"></a>
</h2>
<p><code><a href="../reference/prop.html">prop()</a></code> helps you convert time series into proportion time series (e.g., convert a time series of concentrations of species into a time series of contributions of species).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">prop_voc</span><span class="op">=</span><span class="fu"><a href="../reference/prop.html">prop</a></span><span class="op">(</span><span class="va">voc</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">prop_voc</span><span class="op">)</span>
<span class="co">#&gt;                  Time Propylene Acetylene  n.Butane trans.2.Butene Cyclohexane</span>
<span class="co">#&gt; 1 2020-05-01 00:00:00 0.2169460 0.1629423 0.5065177     0.01862197  0.09497207</span>
<span class="co">#&gt; 2 2020-05-01 01:00:00 0.2657244 0.1431095 0.4975265     0.01978799  0.07385159</span>
<span class="co">#&gt; 3 2020-05-01 02:00:00 0.2955581 0.1309795 0.4920273     0.02050114  0.06093394</span>
<span class="co">#&gt; 4 2020-05-01 03:00:00 0.3301887 0.1168991 0.4856440     0.02132896  0.04593929</span>
<span class="co">#&gt; 5 2020-05-01 04:00:00 0.2683524 0.1190865 0.5318108     0.03058728  0.05016313</span>
<span class="co">#&gt; 6 2020-05-01 05:00:00 0.2728195 0.1876268 0.4584178     0.02484787  0.05628803</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="analysis-of-linear-regression-for-time-series-in-batch">Analysis of linear regression for time series in batch<a class="anchor" aria-label="anchor" href="#analysis-of-linear-regression-for-time-series-in-batch"></a>
</h2>
<p><code><a href="../reference/anylm.html">anylm()</a></code> allows you to analyze linear regression for time series in batch.<br><code>xd</code> are the index of columns you want to put in x axis (independent variables).<br><code>yd</code> are the index of columns you want to put in y axis (dependent variables).<br><code>zd</code> are the index of columns you want to put as color scales. <code>td</code> are the index of columns you want to use as a basis for grouping.</p>
<p>A simple example is demonstrated below to illustrate the functionality.<br>
This example explores the correlation of the built-in dataset aqi. Grouped by day, it explores the correlation of O3 with NO and NO2 for each day. and explores the effect of CO on correlations using CO as the fill color.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">aqi</span>,day<span class="op">=</span><span class="fu">day</span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="va">aqi</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span><span class="op">)</span>
<span class="va">lr_result</span><span class="op">=</span><span class="fu"><a href="../reference/anylm.html">anylm</a></span><span class="op">(</span><span class="va">df</span>, xd<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>, yd<span class="op">=</span><span class="fl">6</span>, zd<span class="op">=</span><span class="fl">4</span>, td<span class="op">=</span><span class="fl">7</span>,dign<span class="op">=</span><span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">lr_result</span><span class="op">)</span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tianshu Chen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
